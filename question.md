# ❓ 질문 & 답변 (Q&A)

---

## 1. 멀티 모듈 프로젝트에서 'API 모듈' (Application Bootstrapper)이 필요한 이유

### ❓ 질문:

"API 프로젝트가 C4 모델링에서 나온 '모듈 통합 및 실행 진입점'인 건 이해한다. 그런데 이게 꼭 필요한가? 각 모듈마다 진입점을 만드는 것보다 나은 점이 있는가? 각 모듈마다 Controller를 둘 계획인데, 사실상 Controller가 진입점 아닌가 하는 생각이 든다."

### 💡 답변:

결론적으로, 현재의 **모듈형 모놀리식(Modular Monolith) 아키텍처**에서는 별도의 `api` 모듈(Application Bootstrapper)이 있는 것이 훨씬 유리하며 필수적입니다. 그 이유는 다음과 같습니다.

1.  **단일 배포 단위 유지 (Monolithic Deployment):**
    *   우리의 목표는 "논리적으로는 분리되어 있지만, 물리적으로는 하나로 배포되는 모놀리스"를 만드는 것입니다.
    *   각 도메인 모듈(product, order, payment)이 자체적인 `main` 메서드(진입점)를 가진다면, 이는 각각 독립적인 마이크로서비스가 되어 배포 단위가 늘어납니다.
    *   `api` 모듈은 이 모든 도메인 모듈의 코드를 통합하여 **단 하나의 실행 가능한 JAR** 파일로 만들어주는 역할을 합니다. 이는 모놀리스 배포의 핵심입니다.

2.  **순환 참조 방지 및 엄격한 의존성 관리:**
    *   `product`, `order`, `payment`와 같은 도메인 모듈들은 서로를 직접 참조하지 않거나, 엄격한 단방향 의존성 규칙을 따라야 합니다.
    *   `api` 모듈이 이 모든 도메인 모듈을 의존(`implementation project`)하고, Spring의 `@ComponentScan`을 통해 모든 모듈의 컴포넌트(Controller, Service 등)를 스캔하여 하나의 애플리케이션 컨텍스트를 구성합니다. 이를 통해 도메인 모듈 간의 불필요한 직접적인 결합을 줄이고, `api` 모듈이 의존성의 중앙 허브 역할을 수행합니다.

3.  **Controller는 '코드의 진입점'이지 '애플리케이션 실행의 진입점'이 아니다:**
    *   각 도메인 모듈 내부에 `@RestController`를 두는 것은 HTTP 요청을 처리하는 "코드의 진입점" 역할을 합니다.
    *   하지만 Spring Boot 애플리케이션의 "실행 진입점"은 `api` 모듈의 `main` 메서드를 포함한 `@SpringBootApplication` 클래스입니다. 이 클래스가 Spring Context를 초기화하고 모든 빈(Bean)들을 등록하는 과정을 주도합니다.

**요약:**
`api` 모듈은 "흩어진 부품(도메인 모듈)들을 모아서 하나의 완성된 제품(단일 실행 가능 서버)으로 조립하는 역할"을 합니다. 이 구조는 현재 모놀리스의 장점을 유지하면서도, 향후 필요시 각 도메인 모듈을 개별 마이크로서비스로 분리(Split)하기 용이하게 만들어주는 발판이 됩니다.
